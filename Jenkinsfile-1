pipeline {
    agent any

    parameters     {
            string(name: 'BinaryCalculatorTest', defaultValue: 'BinaryCalculatorTest', description: 'Name of the test class')
            string(name: 'add', defaultValue: 'testAddition', description: 'Name of the test method')
        }
    //{
    //    booleanParam(defaultValue: true, description: 'run calculator tests', name: 'calculator')
    //}

    stages {
            stage('Binary') {
                steps {
                    echo "Running all tests in class: ${params.BinaryCalculatorTest}"
                    bat "mvn -Dtest=${params.BinaryCalculatorTest} test"
                }
            }

            stage('Single Binary') {
                steps {
                    echo "Running single test: ${params.BinaryCalculatorTest}#${params.add}"
                    bat "mvn -Dtest=${params.BinaryCalculatorTest}#${params.add} test"
                }
            }
        }


    //stages {
    //    stage("calculator") {
    //        when {
    //            expression { return params.calculator }
    //    }
    //    steps {
    //          bat "mvn test"
    //
    //    }
    //   }
    //  }
    //post {
    //    always {
    //        allure([
    //            reportBuildPolicy: 'ALWAYS',
    //            results: [[path: 'allure-results']]
    //            ])
    //    }
    // }
}
