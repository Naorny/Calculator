pipeline {
    agent any

     parameters {
            booleanParam(name: 'RUN_BINARY', defaultValue: true, description: 'Run BinaryCalculatorTest')
            booleanParam(name: 'RUN_DECIMAL', defaultValue: true, description: 'Run DecimalCalculatorTest')
            booleanParam(name: 'RUN_HEX', defaultValue: true, description: 'Run HexCalculatorTest')
        }

    //{
    //    booleanParam(defaultValue: true, description: 'run calculator tests', name: 'calculator')
    //}

    //tools {
    //        maven 'Maven 3.9.6' // Make sure this name matches your Jenkins global tool config
    //    }

        stages {
            stage('Binary Calculator Tests') {
                when {
                    expression { return params.RUN_BINARY }
                }
                steps {
                    echo "Running BinaryCalculatorTest"
                    bat "mvn -Dtest=calculator.BinaryCalculatorTest test"
                }
            }

            stage('Decimal Calculator Tests') {
                when {
                    expression { return params.RUN_DECIMAL }
                }
                steps {
                    echo "Running DecimalCalculatorTest"
                    bat "mvn -Dtest=calculator.DecimalCalculatorTest test"
                }
            }

            stage('Hex Calculator Tests') {
                when {
                    expression { return params.RUN_HEX }
                }
                steps {
                    echo "Running HexCalculatorTest"
                    bat "mvn -Dtest=calculator.HexCalculatorTest test"
                }
            }

            post {
                    always {
                        echo 'Finished running selected test stages.'
                    }
                }
        }



    //stages {
    //    stage("calculator") {
    //        when {
    //            expression { return params.calculator }
    //    }
    //    steps {
    //          bat "mvn test"
    //
    //    }
    //   }
    //  }
    //post {
    //    always {
    //        allure([
    //            reportBuildPolicy: 'ALWAYS',
    //            results: [[path: 'allure-results']]
    //            ])
    //    }
    // }
}
